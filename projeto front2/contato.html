<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luxo - Contato</title>
    <link rel="shortcut icon" href="images/barco2.png" type="image/x-icon" />
    <link rel="stylesheet" href="css/default.css" />
  </head>

  <body>
    <div class="page">
    <header>
      <div id="title">
        <img src="images/barco1.png" alt="ícone de barco" />
        <h1>Luxo</h1>
      </div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="destinos.html">Destinos</a></li>
          <li><a href="aluguel.html">Aluguel</a></li>
          <li><a href="contato.html" class="accent">Contato</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <h2>Fale conosco</h2>

      <form id="form-contato">
        <div class="entry">
          <label for="nome">Nome</label>
          <input type="text" id="nome" />
        </div>

        <div class="entry">
          <label for="email">E-mail</label>
          <input type="email" id="email" />
        </div>

        <div class="entry">
          <label for="msg">Mensagem</label>
          <textarea cols="40" rows="7" id="msg"></textarea>
        </div>
      </form>

      <div class="buttons">
        <button class="button" id="btn-enviar">Enviar</button>
      </div>
    </main>
    </div>

    <footer>
      <p>© 2023 por Luxo aluguel de iates</p>
    </footer>

    <script src="js/jquery-3.6.4.min.js"></script>
    <script src="js/api.js"></script>

    <script>
    
    $(function(){
      $('#btn-enviar').on('click', function(e){
        e.preventDefault();
        var mensagem = {
          nome: $('#nome').val().trim(),
          email: $('#email').val().trim(),
          mensagem: $('#msg').val().trim()
        };

        if(!mensagem.nome || !mensagem.email || !mensagem.mensagem){
          alert('Por favor preencha todos os campos.');
          return;
        }

        try {
          inserirMensagem(mensagem);
          alert('Mensagem enviada com sucesso!');
          $('#nome,#email,#msg').val('');
        } catch(err) {
          console.error(err);
          alert('Erro ao enviar mensagem. Verifique o arquivo api.js e a conexão.');
        }
      });
    });
    </script>
  </body>
</html>
